{"version":3,"sources":["scripts/app.js"],"names":["TodoService","showAll","showCompleted","todo","completed","showActive","App","this","todos","initialTodo","filter","SHOW_ALL","Footer","filters","SHOW_ACTIVE","SHOW_COMPLETED","filterTitles","Header","todoService","MainSection","selectedFilter","visibilityFilters","completeReducer","count","TodoItem","editing","TodoTextInput","$window","$timeout","text","length","focus","routesConfig","$stateProvider","$urlRouterProvider","$locationProvider","html5Mode","hashPrefix","otherwise","state","url","template","$inject","id","prototype","addTodo","concat","completeTodo","map","Object","assign","deleteTodo","editTodo","completeAll","areAllMarked","every","clearCompleted","angular","module","service","type","component","templateUrl","controller","bindings","completedCount","activeCount","onClearCompleted","onShow","handleClear","handleChange","handleSave","handleClearCompleted","handleCompleteAll","handleShow","e","handleDestroy","onDestroy","onChange","onSave","handleDoubleClick","placeholder","newTodo","handleBlur","handleSubmit","keyCode","element","document","querySelector","config","run","$templateCache","put"],"mappings":"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","file":"scripts/app-d9f5327927.js","sourcesContent":["var initialTodo = {\n  text: 'Use AngularJS',\n  completed: false,\n  id: 0\n};\n\nfunction TodoService() {\n}\n\nTodoService.prototype = {\n  addTodo: function (text, todos) {\n    return [\n      {\n        id: (todos.length === 0) ? 0 : todos[0].id + 1,\n        completed: false,\n        text: text\n      }\n    ].concat(todos);\n  },\n\n  completeTodo: function (id, todos) {\n    return todos.map(function (todo) {\n      return todo.id === id ?\n        Object.assign({}, todo, {completed: !todo.completed}) :\n        todo;\n    });\n  },\n\n  deleteTodo: function (id, todos) {\n    return todos.filter(function (todo) {\n      return todo.id !== id;\n    });\n  },\n\n  editTodo: function (id, text, todos) {\n    return todos.map(function (todo) {\n      return todo.id === id ?\n        Object.assign({}, todo, {text: text}) :\n        todo;\n    });\n  },\n\n  completeAll: function (todos) {\n    var areAllMarked = todos.every(function (todo) {\n      return todo.completed;\n    });\n    return todos.map(function (todo) {\n      return Object.assign({}, todo, {completed: !areAllMarked});\n    });\n  },\n\n  clearCompleted: function (todos) {\n    return todos.filter(function (todo) {\n      return todo.completed === false;\n    });\n  }\n};\n\nangular\n  .module('app', ['ui.router'])\n  .service('todoService', TodoService);\n\nvar SHOW_ALL = 'show_all';\nvar SHOW_COMPLETED = 'show_completed';\nvar SHOW_ACTIVE = 'show_active';\n\nfunction showAll() {\n  return true;\n}\n\nfunction showCompleted(todo) {\n  return todo.completed;\n}\n\nfunction showActive(todo) {\n  return !todo.completed;\n}\n\nvar visibilityFilters = {\n};\nvisibilityFilters[SHOW_ALL] = {filter: showAll, type: SHOW_ALL};\nvisibilityFilters[SHOW_COMPLETED] = {filter: showCompleted, type: SHOW_COMPLETED};\nvisibilityFilters[SHOW_ACTIVE] = {filter: showActive, type: SHOW_ACTIVE};\n\nangular\n  .module('app')\n  .component('app', {\n    templateUrl: 'app/containers/App.html',\n    controller: App\n  });\n\nfunction App() {\n  this.todos = [initialTodo];\n  this.filter = SHOW_ALL;\n}\n\nangular\n  .module('app')\n  .component('footerComponent', {\n    templateUrl: 'app/components/Footer.html',\n    controller: Footer,\n    bindings: {\n      completedCount: '<',\n      activeCount: '<',\n      selectedFilter: '<filter',\n      onClearCompleted: '&',\n      onShow: '&'\n    }\n  });\n\nfunction Footer() {\n  this.filters = [SHOW_ALL, SHOW_ACTIVE, SHOW_COMPLETED];\n  this.filterTitles = {};\n  this.filterTitles[SHOW_ALL] = 'All';\n  this.filterTitles[SHOW_ACTIVE] = 'Active';\n  this.filterTitles[SHOW_COMPLETED] = 'Completed';\n}\n\nFooter.prototype = {\n  handleClear: function () {\n    this.onClearCompleted();\n  },\n\n  handleChange: function (filter) {\n    this.onShow({filter: filter});\n  }\n};\n\n\nangular\n  .module('app')\n  .component('headerComponent', {\n    templateUrl: 'app/components/Header.html',\n    controller: Header,\n    bindings: {\n      todos: '='\n    }\n  });\n\n/** @ngInject */\nfunction Header(todoService) {\n  this.todoService = todoService;\n}\n\nHeader.prototype = {\n  handleSave: function (text) {\n    if (text.length !== 0) {\n      this.todos = this.todoService.addTodo(text, this.todos);\n    }\n  }\n};\n\nangular\n  .module('app')\n  .component('mainSection', {\n    templateUrl: 'app/components/MainSection.html',\n    controller: MainSection,\n    bindings: {\n      todos: '=',\n      filter: '<'\n    }\n  });\n\n/** @ngInject */\nfunction MainSection(todoService) {\n  this.todoService = todoService;\n  this.selectedFilter = visibilityFilters[this.filter];\n  this.completeReducer = function (count, todo) {\n    return todo.completed ? count + 1 : count;\n  };\n}\n\nMainSection.prototype = {\n  handleClearCompleted: function () {\n    this.todos = this.todoService.clearCompleted(this.todos);\n  },\n\n  handleCompleteAll: function () {\n    this.todos = this.todoService.completeAll(this.todos);\n  },\n\n  handleShow: function (filter) {\n    this.filter = filter;\n    this.selectedFilter = visibilityFilters[filter];\n  },\n\n  handleChange: function (id) {\n    this.todos = this.todoService.completeTodo(id, this.todos);\n  },\n\n  handleSave: function (e) {\n    if (e.text.length === 0) {\n      this.todos = this.todoService.deleteTodo(e.id, this.todos);\n    } else {\n      this.todos = this.todoService.editTodo(e.id, e.text, this.todos);\n    }\n  },\n\n  handleDestroy: function (e) {\n    this.todos = this.todoService.deleteTodo(e, this.todos);\n  }\n};\n\nangular\n  .module('app')\n  .component('todoItem', {\n    templateUrl: 'app/components/TodoItem.html',\n    controller: TodoItem,\n    bindings: {\n      todo: '<',\n      onDestroy: '&',\n      onChange: '&',\n      onSave: '&'\n    }\n  });\n\nfunction TodoItem() {\n  this.editing = false;\n}\n\nTodoItem.prototype = {\n  handleDoubleClick: function () {\n    this.editing = true;\n  },\n\n  handleSave: function (text) {\n    this.onSave({\n      todo: {\n        text: text,\n        id: this.todo.id\n      }\n    });\n    this.editing = false;\n  },\n\n  handleDestroy: function (id) {\n    this.onDestroy({id: id});\n  }\n};\n\nangular\n  .module('app')\n  .component('todoTextInput', {\n    templateUrl: 'app/components/TodoTextInput.html',\n    controller: TodoTextInput,\n    bindings: {\n      onSave: '&',\n      placeholder: '@',\n      newTodo: '@',\n      editing: '@',\n      text: '<'\n    }\n  });\n\n/** @ngInject */\nfunction TodoTextInput(todoService, $window, $timeout) {\n  this.$timeout = $timeout;\n  this.$window = $window;\n  this.todoService = todoService;\n  this.editing = this.editing || false;\n  this.text = this.text || '';\n  if (this.text.length) {\n    this.focus();\n  }\n}\n\nTodoTextInput.prototype = {\n  handleBlur: function () {\n    if (!this.newTodo) {\n      this.onSave({text: this.text});\n    }\n  },\n\n  handleSubmit: function (e) {\n    if (e.keyCode === 13) {\n      this.onSave({text: this.text});\n      if (this.newTodo) {\n        this.text = '';\n      }\n    }\n  },\n\n  focus: function () {\n    this.$timeout(function () {\n      var element = this.$window.document.querySelector('.editing .textInput');\n      if (element) {\n        element.focus();\n      }\n    }, 0);\n  }\n};\n\nangular\n  .module('app')\n  .config(routesConfig);\n\n/** @ngInject */\nfunction routesConfig($stateProvider, $urlRouterProvider, $locationProvider) {\n  $locationProvider.html5Mode(true).hashPrefix('!');\n  $urlRouterProvider.otherwise('/');\n\n  $stateProvider\n    .state('app', {\n      url: '/',\n      template: '<app></app>'\n    });\n}\n\nangular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/components/Footer.html\",\"<footer class=\\\"footer\\\">\\n  <span class=\\\"todo-count\\\">\\n    <strong>{{$ctrl.activeCount || \\'No\\'}}</strong> {{$ctrl.activeCount === 1 ? \\'item\\' : \\'items\\'}} left\\n  </span>\\n  <ul class=\\\"filters\\\">\\n    <li key=\\\"filter\\\" ng-repeat=\\\"filter in $ctrl.filters\\\">\\n      <a ng-class=\\\"{\\'selected\\': filter === $ctrl.selectedFilter.type}\\\" ng-click=\\\"$ctrl.handleChange(filter)\\\">{{$ctrl.filterTitles[filter]}}</a>\\n    </li>\\n  </ul>\\n  <button ng-if=\\\"$ctrl.completedCount > 0\\\" class=\\\"clear-completed\\\" ng-click=\\\"$ctrl.handleClear()\\\">\\n    Clear completed\\n  </button>\\n</footer>\");\n$templateCache.put(\"app/components/Header.html\",\"<header class=\\\"header\\\">\\n  <h1>todos</h1>\\n  <todo-text-input new-todo=\\\"true\\\" on-save=\\\"$ctrl.handleSave(text)\\\" placeholder=\\\"What needs to be done?\\\"></todo-text-input>\\n</header>\");\n$templateCache.put(\"app/components/MainSection.html\",\"<section class=\\\"main\\\">\\n  <input ng-if=\\\"$ctrl.todos.length\\\" class=\\\"toggle-all\\\" type=\\\"checkbox\\\" ng-checked=\\\"$ctrl.todos.reduce($ctrl.completeReducer, 0) === $ctrl.todos.length\\\" ng-click=\\\"$ctrl.handleCompleteAll()\\\">\\n  <ul class=\\\"todo-list\\\">\\n    <todo-item ng-repeat=\\\"todo in $ctrl.todos.filter($ctrl.selectedFilter.filter)\\\" todo=\\\"todo\\\" on-destroy=\\\"$ctrl.handleDestroy(id)\\\" on-change=\\\"$ctrl.handleChange(id)\\\" on-save=\\\"$ctrl.handleSave(todo)\\\"></todo-item>\\n  </ul>\\n  <footer-component ng-if=\\\"$ctrl.todos.length\\\" completed-count=\\\"$ctrl.todos.reduce($ctrl.completeReducer, 0)\\\" active-count=\\\"$ctrl.todos.length - $ctr.todos.reduce($ctrl.completeReducer, 0)\\\" filter=\\\"$ctrl.selectedFilter\\\" on-clear-completed=\\\"$ctrl.handleClearCompleted()\\\" on-show=\\\"$ctrl.handleShow(filter)\\\"></footer-component>\\n</section>\");\n$templateCache.put(\"app/components/TodoItem.html\",\"<li ng-class=\\\"{\\'editing\\': $ctrl.editing, \\'completed\\': $ctrl.todo.completed}\\\">\\n  <todo-text-input ng-if=\\\"$ctrl.editing\\\" text=\\\"$ctrl.todo.text\\\" editing=\\\"$ctrl.editing\\\" on-save=\\\"$ctrl.handleSave(text)\\\"></todo-text-input>\\n  <div class=\\\"view\\\" ng-if=\\\"!$ctrl.editing\\\">\\n    <input class=\\\"toggle\\\" type=\\\"checkbox\\\" ng-checked=\\\"$ctrl.todo.completed\\\" ng-click=\\\"$ctrl.onChange({id: $ctrl.todo.id})\\\">\\n    <label ng-dblclick=\\\"$ctrl.handleDoubleClick()\\\">{{$ctrl.todo.text}}</label>\\n    <button class=\\\"destroy\\\" ng-click=\\\"$ctrl.handleDestroy($ctrl.todo.id)\\\"></button>\\n  </div>\\n</li>\");\n$templateCache.put(\"app/components/TodoTextInput.html\",\"<input class=\\\"textInput\\\" ng-class=\\\"{\\'edit\\': $ctrl.editing, \\'new-todo\\': $ctrl.newTodo}\\\" ng-model=\\\"$ctrl.text\\\" ng-keypress=\\\"$ctrl.handleSubmit($event)\\\" ng-blur=\\\"$ctrl.handleBlur()\\\" placeholder=\\\"{{$ctrl.placeholder}}\\\" type=\\\"text\\\">\");\n$templateCache.put(\"app/containers/App.html\",\"<header-component todos=\\\"$ctrl.todos\\\"></header-component>\\n<main-section todos=\\\"$ctrl.todos\\\" filter=\\\"$ctrl.filter\\\"></main-section>\\n\");}]);"],"sourceRoot":"/source/"}